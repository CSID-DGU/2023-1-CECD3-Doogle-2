doctype html
html(lang="en")
    head
        meta(charset="UTF-8")
        meta(http-equiv="X-UA-Compatible", content="IE=edge")
        meta(name="viewport", content="width=device-width, initial-scale=1.0")
        title Noom
        link(rel="stylesheet", href="https://unpkg.com/mvp.css")
    body
        header
            h1 Noom
        main
            div#welcome
                form    
                    input(placeholder="room name", required, type="text")
                    button Enter room
            div#call
                div#myStream
                    video#myFace(autoplay, playsinline, width="400", height="400")
                    button#mute Mute
                    button#camera Turn Camera Off
                    button#start-btn Start Recording
                    button#finish-btn Stop Recording
                    button#download-btn Download
                    select#cameras
                    video#peerFace(autoplay, playsinline, width="400", height="400")
        script(src="/socket.io/socket.io.js") 
        script(src="/public/js/app.js")
        script.
            document.getElementById("download-btn").addEventListener("click", function () {
                if (recordedMediaUrl) {
                    const link = document.createElement("a");
                    document.body.appendChild(link);
                    link.href = recordedMediaUrl;
                    link.download = "video.webm";
                    link.click();
                    document.body.removeChild(link);

                    // 파일을 서버로 전송
                    const formData = new FormData();
                    formData.append("video", recordedMediaUrl);

                    // Ajax 또는 fetch를 사용하여 서버에 전송
                    fetch("/uploads", {
                        method: "POST",
                        body: formData
                    })
                    .then(response => response.json())
                    .then(data => console.log(data))
                    .catch(error => console.error(error));
                }
            });

